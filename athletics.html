<!-- ====== athletics.html (Pitching Risk Page) ====== -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PredictWell Athletics — Pitching Risk</title>
  <meta name="description" content="Pitching workload risk scorer for athletes." />
  <link rel="icon" href="data:," />
  <style>
    :root { --fg:#0b1220; --muted:#5b6b88; --bg:#f7f9fc; --card:#ffffff; --accent:#2563eb; --accent2:#0ea5e9; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:var(--fg); background:linear-gradient(180deg, var(--bg), #eef3fb); }
    header { position: sticky; top:0; background:rgba(255,255,255,.8); backdrop-filter: blur(6px); border-bottom:1px solid #e6ecf5; }
    .container { max-width:1100px; margin:0 auto; padding:20px; }
    .brand { display:flex; align-items:center; gap:12px; font-weight:700; }
    .brand img { width:40px; height:40px; border-radius:8px; }
    .grid { display:grid; grid-template-columns: 1.2fr .8fr; gap:24px; margin-top:24px; }
    .card { background:var(--card); border:1px solid #e6ecf5; border-radius:16px; padding:20px; box-shadow: 0 6px 24px rgba(20,40,120,.06); }
    h1 { margin:12px 0 8px; font-size:28px; }
    p.lead { color:var(--muted); margin:0; }
    label { display:block; font-weight:600; margin-top:14px; }
    input[type="number"], input[type="text"], select { width:100%; padding:12px 14px; border-radius:12px; border:1px solid #d7deea; background:#fbfdff; outline:none; }
    input:focus, select:focus { border-color: var(--accent2); box-shadow: 0 0 0 3px rgba(14,165,233,.15); }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .btn { margin-top:18px; display:inline-flex; align-items:center; gap:10px; background:linear-gradient(135deg, var(--accent), var(--accent2)); color:white; border:none; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer; }
    .btn:disabled { opacity:.6; cursor:not-allowed; }
    .result { font-size:15px; }
    .badge { display:inline-block; padding:6px 10px; border-radius:999px; background:#eef2ff; color:#1e3a8a; font-weight:700; }
    .footer { text-align:center; color:var(--muted); font-size:14px; padding:24px 0 36px; }
    @media (max-width: 900px){ .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
      <div class="brand">
        <img src="/static/images/predictwell_background.png" alt="PredictWell" />
        <div>PredictWell <span style="color:var(--accent)">Athletics</span></div>
      </div>
      <nav style="display:flex; gap:16px;">
        <a href="/index.html">Home</a>
        <a href="/eldercare.html">Eldercare</a>
        <span class="badge">Pitching Risk</span>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <h1>Pitching Risk Score</h1>
        <p class="lead">Enter today’s workload & health to get a risk band and key drivers.</p>

        <form id="pitchForm">
          <div class="row">
            <div>
              <label>Pitch Count (today)</label>
              <input type="number" id="pitch_count" min="0" placeholder="e.g., 72" required />
            </div>
            <div>
              <label>Days Rest</label>
              <input type="number" id="days_rest" min="0" placeholder="e.g., 1" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label>Pain Level (0–10)</label>
              <input type="number" id="pain_level" min="0" max="10" placeholder="e.g., 3" required />
            </div>
            <div>
              <label>Session Intensity (1–10)</label>
              <input type="number" id="session_intensity" min="1" max="10" placeholder="e.g., 8" required />
            </div>
          </div>

          <label>Previous Injury?</label>
          <select id="previous_injury">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>

          <button class="btn" id="scoreBtn" type="submit">Compute Risk</button>
        </form>
      </section>

      <aside class="card">
        <h2 style="margin-top:0;">Your Result</h2>
        <div id="result" class="result">Fill the form and click <b>Compute Risk</b>.</div>
      </aside>
    </div>

    <p class="footer">© PredictWell Health.ai • Athletes division</p>
  </main>

<script>
  // ===== CONFIG =====
  // If frontend and backend are on the SAME Render service: leave as empty string ''.
  // If backend is separate, set to the full URL (e.g., 'https://predictwell-backend.onrender.com').
  const BASE_API = '';

  const form = document.getElementById('pitchForm');
  const resultEl = document.getElementById('result');
  const scoreBtn = document.getElementById('scoreBtn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    scoreBtn.disabled = true;
    resultEl.textContent = 'Scoring...';

    const payload = {
      pitch: {
        pitch_count: Number(document.getElementById('pitch_count').value || 0),
        days_rest: Number(document.getElementById('days_rest').value || 0),
        pain_level: Number(document.getElementById('pain_level').value || 0),
        session_intensity: Number(document.getElementById('session_intensity').value || 1),
        previous_injury: document.getElementById('previous_injury').value === 'true'
      },
      elder: null
    };

    try {
      const res = await fetch(`${BASE_API}/risk`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      resultEl.innerHTML = `
        <div style="font-size:32px; font-weight:800;">${(data.risk_score*100).toFixed(0)}%</div>
        <div class="badge" style="margin:6px 0 14px;">${data.risk_band}</div>
        <div><b>Factors:</b> ${data.factors && data.factors.length ? data.factors.join(', ') : 'None highlighted'}</div>
      `;
    } catch (err) {
      resultEl.innerHTML = `<span style="color:#b91c1c;">Error calculating risk — ${err.message}. Check API URL.</span>`;
    } finally {
      scoreBtn.disabled = false;
    }
  });
</script>
</body>
</html>


<!-- ====== eldercare.html (Eldercare Risk + Check-in Page) ====== -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PredictWell Eldercare — Daily Risk & Check-in</title>
  <meta name="description" content="Daily risk screening and wellness check-ins for seniors." />
  <link rel="icon" href="data:," />
  <style>
    :root { --fg:#0b1220; --muted:#5b6b88; --bg:#f7f9fc; --card:#ffffff; --accent:#16a34a; --accent2:#22c55e; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color:var(--fg); background:linear-gradient(180deg, var(--bg), #eef7ef); }
    header { position: sticky; top:0; background:rgba(255,255,255,.8); backdrop-filter: blur(6px); border-bottom:1px solid #e6ecf5; }
    .container { max-width:1100px; margin:0 auto; padding:20px; }
    .brand { display:flex; align-items:center; gap:12px; font-weight:700; }
    .brand img { width:40px; height:40px; border-radius:8px; }
    .grid { display:grid; grid-template-columns: 1.2fr .8fr; gap:24px; margin-top:24px; }
    .card { background:var(--card); border:1px solid #e6ecf5; border-radius:16px; padding:20px; box-shadow: 0 6px 24px rgba(20,120,40,.06); }
    h1 { margin:12px 0 8px; font-size:28px; }
    p.lead { color:var(--muted); margin:0; }
    label { display:block; font-weight:600; margin-top:14px; }
    input[type="number"], input[type="text"], select { width:100%; padding:12px 14px; border-radius:12px; border:1px solid #d7deea; background:#fbfdff; outline:none; }
    input:focus, select:focus { border-color: var(--accent2); box-shadow: 0 0 0 3px rgba(34,197,94,.15); }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .btn { margin-top:18px; display:inline-flex; align-items:center; gap:10px; background:linear-gradient(135deg, var(--accent), var(--accent2)); color:white; border:none; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer; }
    .btn:disabled { opacity:.6; cursor:not-allowed; }
    .result { font-size:15px; }
    .badge { display:inline-block; padding:6px 10px; border-radius:999px; background:#ecfdf5; color:#065f46; font-weight:700; }
    .footer { text-align:center; color:var(--muted); font-size:14px; padding:24px 0 36px; }
    @media (max-width: 900px){ .grid { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex; justify-content:space-between; align-items:center;">
      <div class="brand">
        <img src="/static/images/predictwell_background.png" alt="PredictWell" />
        <div>PredictWell <span style="color:var(--accent)">Eldercare</span></div>
      </div>
      <nav style="display:flex; gap:16px;">
        <a href="/index.html">Home</a>
        <span class="badge">Eldercare</span>
        <a href="/athletics.html">Athletics</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <h1>Daily Risk & Wellness Check-in</h1>
        <p class="lead">Quick screening to flag fall or wellness risks and save a check-in.</p>

        <form id="elderForm">
          <div class="row">
            <div>
              <label>Age</label>
              <input type="number" id="age" min="0" placeholder="e.g., 78" required />
            </div>
            <div>
              <label>Falls (last 6 months)</label>
              <input type="number" id="falls" min="0" placeholder="e.g., 0" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label>Dizziness (0–10)</label>
              <input type="number" id="dizziness" min="0" max="10" placeholder="e.g., 2" required />
            </div>
            <div>
              <label>Steps (today)</label>
              <input type="number" id="steps" min="0" placeholder="e.g., 4200" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label>Sleep Hours (last night)</label>
              <input type="number" step="0.1" id="sleep" min="0" placeholder="e.g., 6.5" required />
            </div>
            <div>
              <label>Hydration (cups)</label>
              <input type="number" id="hydration" min="0" placeholder="e.g., 5" required />
            </div>
          </div>

          <label>Medication Changed Recently?</label>
          <select id="meds_changed">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>

          <button class="btn" id="riskBtn" type="submit">Compute Risk</button>
          <button class="btn" id="checkinBtn" type="button" style="background:linear-gradient(135deg,#1f2937,#4b5563);">Save Check-in</button>
        </form>
      </section>

      <aside class="card">
        <h2 style="margin-top:0;">Today’s Result</h2>
        <div id="result" class="result">Fill the form and click <b>Compute Risk</b>.</div>
        <div id="saved" style="margin-top:12px; color:#065f46;"></div>
      </aside>
    </div>

    <p class="footer">© PredictWell Health.ai • Eldercare division</p>
  </main>

<script>
  // ===== CONFIG =====
  // Same origin: ''  |  Separate backend: 'https://your-backend.onrender.com'
  const BASE_API = '';

  const form = document.getElementById('elderForm');
  const resultEl = document.getElementById('result');
  const savedEl = document.getElementById('saved');
  const riskBtn = document.getElementById('riskBtn');
  const checkinBtn = document.getElementById('checkinBtn');

  function readInputs(){
    return {
      age: Number(document.getElementById('age').value || 0),
      falls_last_6mo: Number(document.getElementById('falls').value || 0),
      dizziness: Number(document.getElementById('dizziness').value || 0),
      steps: Number(document.getElementById('steps').value || 0),
      sleep_hours: Number(document.getElementById('sleep').value || 0),
      hydration_cups: Number(document.getElementById('hydration').value || 0),
      meds_changed: document.getElementById('meds_changed').value === 'true'
    };
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    riskBtn.disabled = true; savedEl.textContent = ''; resultEl.textContent = 'Scoring...';
    const elder = readInputs();

    try {
      const res = await fetch(`${BASE_API}/risk`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ pitch:null, elder })
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      resultEl.innerHTML = `
        <div style="font-size:32px; font-weight:800;">${(data.risk_score*100).toFixed(0)}%</div>
        <div class="badge" style="margin:6px 0 14px;">${data.risk_band}</div>
        <div><b>Factors:</b> ${data.factors && data.factors.length ? data.factors.join(', ') : 'None highlighted'}</div>
      `;
    } catch (err) {
      resultEl.innerHTML = `<span style="color:#b91c1c;">Error calculating risk — ${err.message}. Check API URL.</span>`;
    } finally { riskBtn.disabled = false; }
  });

  checkinBtn.addEventListener('click', async () => {
    checkinBtn.disabled = true; savedEl.style.color = '#065f46'; savedEl.textContent = 'Saving...';
    const payload = readInputs();
    try {
      const res = await fetch(`${BASE_API}/eldercare/checkin`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      savedEl.textContent = `Check-in saved (ID ${data.id}).`;
    } catch (err) {
      savedEl.style.color = '#b91c1c';
      savedEl.textContent = `Error saving check-in — ${err.message}.`;
    } finally { checkinBtn.disabled = false; }
  });
</script>
</body>
</html>


<!-- ====== backend main.py (drop in your backend/app/main.py) ====== -->
<!-- If you already have a main.py, ensure these concepts exist: CORS + routers + DB init. -->
<!-- Save as: backend/app/main.py -->
<!DOCTYPE IGNORE>
<pre>
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from .config import settings
from .database import Base, engine
from .routers import root, patients, risk, eldercare

app = FastAPI(title=settings.APP_NAME)

# Create tables
Base.metadata.create_all(bind=engine)

# Allow browser calls from your site
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # tighten later to your domain(s)
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# Routers
app.include_router(root.router)
app.include_router(patients.router)
app.include_router(risk.router)
app.include_router(eldercare.router)
</pre>
