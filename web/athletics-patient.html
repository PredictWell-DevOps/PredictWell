<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PredictWell — Athletics Patient Portal</title>
  <meta name="description" content="Athletics Patient Portal — daily workload & recovery check-ins." />
  <link rel="icon" href="data:," />
  <!-- Poppins to match INDEX -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    html { scroll-behavior: smooth; }

    :root{
      --pw-navy: #1e3a8a;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:#111827;
      background-image:url("/static/images/predictwell_background.png");
      background-size:cover; background-position:center; background-repeat:no-repeat; background-attachment:fixed;
    }

    /* ===== Standard Header (identical to INDEX) ===== */
    .header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.2) blur(6px);
      background:linear-gradient(90deg,rgba(255,255,255,.62),rgba(255,255,255,.42));
      border-bottom:1px solid rgba(0,0,0,.18)}
    .header-inner{max-width:1080px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;gap:14px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#0b1020}
    .brand-logo{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,#2563eb,#60a5fa);box-shadow:0 10px 30px rgba(0,0,0,.18)}
    .brand-title{font-size:22px;line-height:1}
    .brand-title b{font-weight:800}
    .brand-title .thin{font-weight:600}
    .brand-tagline{font-size:12px;color:#374151;opacity:.95}
    .spacer{flex:1}
    .hamburger{border:none;background:#fff;border-radius:999px;width:36px;height:36px;display:grid;place-items:center;box-shadow:0 10px 30px rgba(0,0,0,.18);cursor:pointer}
    .hamburger:after{content:"≡";font-size:20px;color:#111827;position:relative;top:-1px}
    .menu{position:absolute;right:18px;top:58px;background:rgba(255,255,255,.78);backdrop-filter:blur(10px);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.18);padding:8px;display:none}
    .menu a{display:block;padding:10px 12px;border-radius:10px;text-decoration:none;color:#111827;min-width:220px}
    .menu a:hover{background:rgba(17,24,39,.06)}
    /* ===== /Header ===== */

    /* ===== Shared “bubble” containers (match INDEX) ===== */
    .pw-mobile-section { margin: 26px auto 40px; padding: 0 18px; }
    .pw-mobile-wrap { max-width: 1080px; margin: 0 auto; background: rgba(255,255,255,0.78); border-radius: 18px; box-shadow: 0 10px 30px rgba(0,0,0,0.18); padding: 26px 28px; backdrop-filter: blur(6px) saturate(1.1); }
    .pw-mobile-header { text-align:center; margin: 0 0 8px 0; font-size: clamp(24px, 2.2vw, 34px); letter-spacing: .2px; color: var(--pw-navy); font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; }
    .pw-mobile-sub { text-align:center; margin: 8px auto 18px; max-width: 820px; color: #374151; line-height: 1.55; font-size: 15px; }

    /* ===== Form styles aligned to site ===== */
    .pw-form { display: grid; gap: 14px; }
    .pw-row-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 780px){ .pw-row-2 { grid-template-columns: 1fr; } }
    .pw-field { display: grid; gap: 6px; }
    .pw-label { font-size: 12px; color: #374151; }
    .pw-input, .pw-select, .pw-textarea {
      width: 100%; border: 1px solid rgba(17,24,39,0.08); border-radius: 12px; background: #fff; padding: 10px 12px; font-size: 14px; outline:none;
    }
    .pw-textarea { min-height: 120px; resize: vertical; }
    .pw-help { font-size: 12.5px; color:#6b7280; }

    /* Patient submit button uses orange gradient like portal buttons */
    .pw-btn-submit {
      background: linear-gradient(135deg,#f97316,#fb923c);
      color:#fff; border:0; border-radius:999px; padding:10px 18px; font-weight:800; cursor:pointer;
      box-shadow:0 10px 24px rgba(249,115,22,0.22);
    }

    .status { font-size: 14px; margin-top: 8px; }
    .ok { color: #16a34a; }
    .err { color: #dc2626; }

    /* Simple footer */
    .pw-footer { margin: 20px auto 40px; padding: 0 18px; }
    .pw-footer-wrap { max-width: 1080px; margin: 0 auto; background: rgba(255,255,255,0.78); border-radius: 18px; box-shadow: 0 10px 30px rgba(0,0,0,0.18); padding: 18px 22px; text-align:center; color:#374151; }
  </style>
</head>
<body>
  <!-- ===== HEADER (unchanged across site) ===== -->
  <header class="header">
    <div class="header-inner">
      <a class="brand" href="/index.html" aria-label="Back to PredictWell Health.ai home">
        <div class="brand-logo" aria-hidden="true"></div>
        <div>
          <div class="brand-title"><b>PredictWell</b><span class="thin">Health.ai</span></div>
          <div class="brand-tagline">AI health intelligence for longer, stronger living.</div>
        </div>
      </a>
      <div class="spacer"></div>
      <button class="hamburger" id="menuBtn" aria-label="Open menu"></button>
      <nav class="menu" id="menu">
        <a href="/eldercare.html">Eldercare — Doctors</a>
        <a href="/eldercare-patient.html">Eldercare — Patients</a>
        <a href="/athletics.html">Athletics — Doctors</a>
        <a href="/athletics-patient.html"><strong>Athletics — Patients</strong></a>
      </nav>
    </div>
  </header>
  <!-- ===== /HEADER ===== -->

  <!-- ===== PAGE HERO (matches site style) ===== -->
  <section class="pw-mobile-section" id="hero">
    <div class="pw-mobile-wrap">
      <h1 class="pw-mobile-header">Athletics Patient Portal</h1>
      <p class="pw-mobile-sub">
        Enter your daily workload and recovery metrics. Your submission goes to the PredictWell backend and returns a confirmation.
      </p>
    </div>
  </section>

  <!-- ===== FORM CARD ===== -->
  <section class="pw-mobile-section" id="form">
    <div class="pw-mobile-wrap">
      <form id="athPatientForm" class="pw-form" autocomplete="on" novalidate>
        <div class="pw-row-2">
          <div class="pw-field">
            <label class="pw-label" for="name">Full Name</label>
            <input class="pw-input" id="name" name="name" placeholder="Jane Doe" required />
          </div>
          <div class="pw-field">
            <label class="pw-label" for="sleep">Hours Slept</label>
            <input class="pw-input" id="sleep" name="sleep" placeholder="e.g., 7.5" inputmode="decimal" />
          </div>
        </div>

        <div class="pw-row-2">
          <div class="pw-field">
            <label class="pw-label" for="pitches">Pitch Count (if applicable)</label>
            <input class="pw-input" id="pitches" name="pitches" placeholder="e.g., 42" inputmode="numeric" />
          </div>
          <div class="pw-field">
            <label class="pw-label" for="pain">Pain Level</label>
            <select class="pw-select" id="pain" name="pain">
              <option value="">Select Pain Level</option>
              <option value="0">0 — No pain</option>
              <option>1</option><option>2</option><option>3</option>
              <option>4</option><option>5</option><option>6</option>
              <option>7</option><option>8</option><option>9</option>
              <option value="10">10 — Worst</option>
            </select>
          </div>
        </div>

        <div class="pw-field">
          <label class="pw-label" for="notes">Additional Notes</label>
          <textarea class="pw-textarea" id="notes" name="notes" placeholder="Soreness, workload, recovery, etc."></textarea>
        </div>

        <div class="pw-field" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
          <button type="submit" class="pw-btn-submit">Submit</button>
          <span class="pw-help">We’ll confirm receipt and include any risk score returned by the API.</span>
        </div>

        <div id="status" class="status" role="status" aria-live="polite"></div>
      </form>
    </div>
  </section>

  <!-- ===== FOOTER (simple, matching style) ===== -->
  <footer class="pw-footer">
    <div class="pw-footer-wrap">
      © <span id="yr"></span> PredictWell Health.ai — Athletics
    </div>
  </footer>

  <script>
    // Year stamp
    document.getElementById('yr').textContent = new Date().getFullYear();

    // Header menu behavior (same as INDEX)
    const menuBtn = document.getElementById('menuBtn');
    const menu = document.getElementById('menu');
    document.addEventListener('click', (e) => {
      if (menuBtn.contains(e.target)) {
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      } else if (!menu.contains(e.target)) {
        menu.style.display = 'none';
      }
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') menu.style.display = 'none';
    });
    menu.querySelectorAll('a').forEach(a => a.addEventListener('click', () => { menu.style.display = 'none'; }));

    // Form submission
    const BASE_API = 'https://predictwell-backend-ai.onrender.com';
    const form = document.getElementById('athPatientForm');
    const statusEl = document.getElementById('status');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.textContent = 'Submitting...';
      statusEl.className = 'status';

      const payload = {
        name: form.name.value.trim(),
        sleep_hours: parseFloat(form.sleep.value || '0'),
        pitch_count: parseInt(form.pitches.value || '0', 10),
        pain_level: form.pain.value === '' ? null : parseInt(form.pain.value,10),
        notes: form.notes.value.trim() || null
      };

      try{
        const res = await fetch(`${BASE_API}/risk`, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify(payload)
        });
        if(!res.ok) throw new Error('HTTP '+res.status);
        const data = await res.json();
        const risk = (data && (data.risk ?? data.risk_score)) != null ? ` Risk score: ${data.risk ?? data.risk_score}` : '';
        statusEl.textContent = 'Thank you! Your entry was received.' + risk;
        statusEl.className = 'status ok';
        form.reset();
      }catch(err){
        console.error(err);
        statusEl.textContent = 'Submission failed. Please try again.';
        statusEl.className = 'status err';
      }
    });
  </script>
</body>
</html>
