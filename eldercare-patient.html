<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Eldercare — Patient Check-In</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b1220;--ink:#e9eefc;--muted:#9bb0d3;--panel:#121a2b;--line:#213052}
    *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    .wrap{max-width:980px;margin:0 auto;padding:26px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:20px;margin-bottom:14px}
    label{display:block;margin-bottom:6px;font-weight:600}
    input[type="text"], input[type="number"]{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#0b1426;color:#e9eefc}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:760px){.grid{grid-template-columns:1fr}}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:1px solid #2a3a5e;background:#1a2440;color:#fff;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .muted{color:var(--muted)}
    .bar{height:12px;border-radius:999px;background:linear-gradient(90deg,#34d399,#f59e0b,#ef4444)}
    .gauge{position:relative;margin-top:8px}
    .needle{position:absolute;top:-6px;width:2px;height:24px;background:#fff;border-radius:1px}
    .kv{display:grid;grid-template-columns:220px 1fr;gap:8px;margin:6px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card"><h2 style="margin:0">Eldercare — Patient Check-In</h2><p class="muted" style="margin:6px 0 0">A short form with a friendly summary.</p></div>

    <form id="f" class="card">
      <div class="grid">
        <div>
          <label>Name</label><input id="name" type="text" placeholder="e.g., Pat Q." />
        </div>
        <div>
          <label>Age</label><input id="age" type="number" min="0" max="120" value="78" />
        </div>
      </div>

      <h3>Vitals & Daily</h3>
      <div class="grid">
        <div><label>SpO₂ (%)</label><input id="spo2" type="number" min="70" max="100" value="96" /></div>
        <div><label>Resting HR (bpm)</label><input id="rhr" type="number" min="30" max="140" value="70" /></div>
        <div><label>Sleep (hours)</label><input id="sleep" type="number" min="0" max="12" step="0.1" value="7" /></div>
        <div><label>Daily steps</label><input id="steps" type="number" min="0" step="100" value="3000" /></div>
      </div>

      <h3>Flags</h3>
      <div class="grid">
        <div><label><input id="gait" type="checkbox" /> Any balance or gait concerns?</label></div>
        <div><label><input id="cog" type="checkbox" /> Any memory or attention concerns?</label></div>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn" type="submit">Show Results</button>
        <a class="btn" href="/index.html">Back</a>
      </div>
    </form>

    <div id="result" class="card" style="display:none">
      <h3 style="margin-top:0">Results</h3>

      <div class="gauge">
        <div class="bar"></div>
        <div id="needle" class="needle"></div>
      </div>
      <div class="muted" style="display:flex;justify-content:space-between;margin-top:6px">
        <span>Low</span><span>Moderate</span><span>High</span>
      </div>

      <div style="margin-top:10px"><strong id="band">—</strong> <span class="muted" id="score"></span></div>

      <div class="card" style="margin-top:12px">
        <h4 style="margin:0 0 6px">Summary</h4>
        <div id="sum"></div>
      </div>
    </div>
  </div>

<script>
function val(id){return document.getElementById(id).value}
function chk(id){return document.getElementById(id).checked}
function kv(k,v){return `<div class="kv"><div class="muted">${k}</div><div>${v}</div></div>`}

function compute(){
  const spo2 = +val('spo2')||0, rhr = +val('rhr')||0, sleep= +val('sleep')||0;
  let score = 0;
  if(spo2){ score += Math.max(0, 98 - Math.min(spo2,98))*5; }
  if(rhr){ score += Math.max(0, rhr - 60); }
  if(sleep){ score += Math.max(0, 7 - sleep)*5; }
  if(chk('gait')) score += 10;
  if(chk('cog'))  score += 10;
  score = Math.max(0, Math.min(100, Math.round(score)));
  const band = score<33?'Low':(score<66?'Moderate':'High');
  return {score,band};
}
function setNeedle(score){
  const n=document.getElementById('needle');
  n.style.left=`calc(${score}% - 1px)`;
}
document.getElementById('f').addEventListener('submit', (e)=>{
  e.preventDefault();
  const {score,band}=compute();
  setNeedle(score);
  document.getElementById('band').textContent=band;
  document.getElementById('score').textContent=`(${score}/100)`;

  const s = [];
  s.push(kv('Name', val('name')||'—'));
  s.push(kv('Age', val('age')||'—'));
  s.push(kv('SpO₂ (%)', val('spo2')||'—'));
  s.push(kv('Resting HR', val('rhr')||'—'));
  s.push(kv('Sleep (h)', val('sleep')||'—'));
  s.push(kv('Steps', val('steps')||'—'));
  s.push(kv('Gait concern', chk('gait')?'Yes':'No'));
  s.push(kv('Cognitive concern', chk('cog')?'Yes':'No'));
  document.getElementById('sum').innerHTML = s.join('');
  document.getElementById('result').style.display='';
});
</script>
</body>
</html>
